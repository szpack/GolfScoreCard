<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golf Scorecard Overlay</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;500;600;700;800;900&family=Barlow:wght@400;500;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #1a1a2e;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    font-family: 'Barlow Condensed', sans-serif;
    gap: 32px;
    padding: 40px;
  }

  .demo-label {
    color: rgba(255,255,255,0.3);
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    font-family: 'Barlow', sans-serif;
  }

  .scorecard {
    display: flex;
    align-items: stretch;
    height: 80px;
    filter: drop-shadow(0 8px 32px rgba(0,0,0,0.7));
    animation: slideIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(14px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .hole-number {
    background: #00573F;
    width: 76px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .hole-label {
    font-size: 9px; letter-spacing: 2.5px;
    color: rgba(255,255,255,0.55);
    text-transform: uppercase; font-weight: 600; line-height: 1; margin-bottom: 1px;
  }
  .hole-num { font-size: 40px; font-weight: 900; color: #fff; line-height: 1; letter-spacing: -1px; }

  .divider { width: 3px; background: #C9A84C; flex-shrink: 0; }

  .hole-info {
    background: rgba(8,12,18,0.97);
    display: flex; flex-direction: column; min-width: 300px;
  }

  .info-top {
    display: flex; align-items: center;
    padding: 10px 16px 8px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    flex: 1;
  }

  .par-block { display: flex; flex-direction: column; align-items: flex-start; flex-shrink: 0; }
  .par-label { font-size: 8px; letter-spacing: 2.5px; color: #C9A84C; text-transform: uppercase; font-weight: 700; line-height: 1; }
  .par-value { font-size: 30px; font-weight: 900; color: #fff; line-height: 1.05; letter-spacing: -1px; }

  .info-sep { width: 1px; height: 32px; background: rgba(255,255,255,0.1); margin: 0 14px; flex-shrink: 0; }

  .yardage-block { display: flex; flex-direction: column; align-items: flex-start; flex-shrink: 0; }
  .yardage-label { font-size: 8px; letter-spacing: 2px; color: rgba(255,255,255,0.4); text-transform: uppercase; font-weight: 600; line-height: 1; }
  .yardage-value { font-size: 24px; font-weight: 800; color: rgba(255,255,255,0.88); line-height: 1.1; letter-spacing: -0.5px; }
  .yardage-unit  { font-size: 10px; color: rgba(255,255,255,0.35); font-weight: 500; margin-left: 2px; }

  .status-area { margin-left: auto; display: flex; align-items: center; padding-left: 14px; }
  .status-tag  { display: flex; align-items: center; gap: 7px; }
  .status-dot  { width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; animation: pulse 2s ease-in-out infinite; }

  @keyframes pulse {
    0%,100% { opacity:1; transform:scale(1); }
    50%      { opacity:.45; transform:scale(.65); }
  }

  .status-text { font-size: 13px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; white-space: nowrap; }

  .status-dot.tee,      .status-text.tee      { color:#fff; }
  .status-dot.tee                              { background:#fff; box-shadow:0 0 7px rgba(255,255,255,.7); }
  .status-dot.approach, .status-text.approach  { color:#60a5fa; }
  .status-dot.approach                         { background:#60a5fa; box-shadow:0 0 7px rgba(96,165,250,.7); }
  .status-dot.chip,     .status-text.chip      { color:#f59e0b; }
  .status-dot.chip                             { background:#f59e0b; box-shadow:0 0 7px rgba(245,158,11,.7); }
  .status-dot.putt,     .status-text.putt      { color:#a78bfa; }
  .status-dot.putt                             { background:#a78bfa; box-shadow:0 0 7px rgba(167,139,250,.7); }
  .status-dot.birdie,   .status-text.birdie    { color:#f87171; }
  .status-dot.birdie                           { background:#f87171; box-shadow:0 0 7px rgba(248,113,113,.7); }
  .status-dot.eagle,    .status-text.eagle     { color:#fbbf24; }
  .status-dot.eagle                            { background:#fbbf24; box-shadow:0 0 8px rgba(251,191,36,.9); }
  .status-dot.ace,      .status-text.ace       { color:#fbbf24; }
  .status-dot.ace                              { background:#fbbf24; box-shadow:0 0 10px rgba(251,191,36,1); }
  .status-dot.par,      .status-text.par       { color:#60a5fa; }
  .status-dot.par                              { background:#60a5fa; box-shadow:0 0 7px rgba(96,165,250,.7); }
  .status-dot.bogey,    .status-text.bogey     { color:#9ca3af; }
  .status-dot.bogey                            { background:#9ca3af; box-shadow:0 0 5px rgba(156,163,175,.5); }

  .shot-tracker {
    display: flex; align-items: center;
    padding: 0 12px; gap: 5px; height: 26px;
    background: rgba(0,0,0,0.35);
  }
  .shot-label { font-size: 7.5px; letter-spacing: 2px; color: rgba(255,255,255,.28); text-transform: uppercase; font-weight: 600; margin-right: 5px; white-space: nowrap; }
  .shot-dot { width: 26px; height: 15px; border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 800; transition: all .25s; }
  .shot-dot.empty   { background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.09); color: rgba(255,255,255,.12); }
  .shot-dot.past    { background: rgba(255,255,255,.12); color: rgba(255,255,255,.45); }
  .shot-dot.current { background: #C9A84C; color: #000; box-shadow: 0 0 10px rgba(201,168,76,.55); }

  /* ===== CONTROLS ===== */
  .controls { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; max-width: 720px; }
  .ctrl-group { display: flex; flex-direction: column; align-items: center; gap: 8px; }
  .ctrl-label { color: rgba(255,255,255,.35); font-size: 9.5px; letter-spacing: 2px; text-transform: uppercase; font-family: 'Barlow', sans-serif; }
  .ctrl-row { display: flex; gap: 5px; align-items: center; }

  button {
    background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.11);
    color: #fff; padding: 7px 13px; border-radius: 3px;
    font-family: 'Barlow Condensed', sans-serif; font-size: 13px; font-weight: 600;
    letter-spacing: .5px; cursor: pointer; transition: all .15s;
  }
  button:hover { background: rgba(255,255,255,.14); }
  button.active { background: #00573F; border-color: #00573F; }

  .input-ctrl {
    background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.11);
    color: #fff; padding: 7px 8px; border-radius: 3px;
    font-family: 'Barlow Condensed', sans-serif; font-size: 14px; font-weight: 700;
    width: 70px; text-align: center;
  }

  .status-btns { display: flex; gap: 5px; flex-wrap: wrap; justify-content: center; max-width: 420px; }
  .status-btn { font-size: 11px; padding: 5px 11px; letter-spacing: .8px; }
  .status-btn.sel-tee      { background: rgba(255,255,255,.18); border-color: rgba(255,255,255,.4); color: #fff; }
  .status-btn.sel-approach { background: rgba(96,165,250,.2);   border-color: #60a5fa; color: #60a5fa; }
  .status-btn.sel-chip     { background: rgba(245,158,11,.18);  border-color: #f59e0b; color: #f59e0b; }
  .status-btn.sel-putt     { background: rgba(167,139,250,.2);  border-color: #a78bfa; color: #a78bfa; }
  .status-btn.sel-birdie   { background: rgba(248,113,113,.2);  border-color: #f87171; color: #f87171; }
  .status-btn.sel-eagle    { background: rgba(251,191,36,.2);   border-color: #fbbf24; color: #fbbf24; }
  .status-btn.sel-ace      { background: rgba(251,191,36,.25);  border-color: #fbbf24; color: #fbbf24; }
  .status-btn.sel-par      { background: rgba(96,165,250,.18);  border-color: #60a5fa; color: #60a5fa; }
  .status-btn.sel-bogey    { background: rgba(156,163,175,.15); border-color: #9ca3af; color: #9ca3af; }

  /* ===== SNAPSHOT ===== */
  .snap-wrap { display: flex; flex-direction: column; align-items: center; gap: 10px; }
  .snap-format { display: flex; gap: 6px; align-items: center; }
  .snap-format label { color: rgba(255,255,255,.35); font-size: 10px; letter-spacing: 1.5px; font-family: 'Barlow', sans-serif; }
  .snap-format button { font-size: 10px; padding: 4px 10px; border-radius: 3px; letter-spacing: 1px; }
  .snap-format button.active { background: #C9A84C; border-color: #C9A84C; color: #000; font-weight: 800; }

  .snap-btn {
    display: flex; align-items: center; gap: 10px;
    background: linear-gradient(135deg,#C9A84C,#e8c96a,#C9A84C);
    background-size: 200% 200%;
    border: none; color: #1a1200; padding: 11px 28px; border-radius: 4px;
    font-family: 'Barlow Condensed', sans-serif; font-size: 15px; font-weight: 800;
    letter-spacing: 2px; text-transform: uppercase; cursor: pointer; transition: all .2s;
    box-shadow: 0 4px 20px rgba(201,168,76,.35);
  }
  .snap-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 28px rgba(201,168,76,.5); }
  .snap-btn:active { transform: translateY(0); }
  .snap-btn svg { width: 16px; height: 16px; flex-shrink: 0; }
  .snap-btn:disabled { opacity: .5; cursor: default; transform: none; }

  .snap-feedback {
    font-size: 11px; letter-spacing: 1.5px; opacity: 0;
    color: rgba(255,255,255,.55); font-family: 'Barlow', sans-serif;
    transition: opacity .3s; height: 16px; text-align: center; max-width: 480px;
  }
  .snap-feedback.show { opacity: 1; }

  .section-title { color: rgba(255,255,255,.15); font-size: 9px; letter-spacing: 4px; text-transform: uppercase; font-family: 'Barlow', sans-serif; }
  .variants { display: flex; gap: 14px; flex-wrap: wrap; justify-content: center; align-items: flex-start; }
  .variant-label { color: rgba(255,255,255,.25); font-size: 8.5px; letter-spacing: 2px; text-align: center; margin-bottom: 5px; font-family: 'Barlow', sans-serif; }

  /* ===== CHECKBOX TOGGLE ===== */
  .ctrl-group.with-check { position: relative; }

  .check-row {
    display: flex;
    align-items: center;
    gap: 7px;
    cursor: pointer;
    user-select: none;
  }

  .check-row input[type=checkbox] { display: none; }

  .custom-check {
    width: 15px; height: 15px;
    border: 1.5px solid rgba(255,255,255,0.2);
    border-radius: 3px;
    background: rgba(255,255,255,0.05);
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    transition: all 0.15s;
  }
  .check-row:hover .custom-check { border-color: rgba(255,255,255,0.4); }
  .check-row input:checked + .custom-check {
    background: #C9A84C;
    border-color: #C9A84C;
  }
  .custom-check svg { display: none; width: 9px; height: 9px; }
  .check-row input:checked + .custom-check svg { display: block; }

  .ctrl-body {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height 0.25s ease, opacity 0.2s ease;
    margin-top: 0;
  }
  .ctrl-body.visible {
    max-height: 80px;
    opacity: 1;
    margin-top: 8px;
  }
</style>
</head>
<body>

<div class="demo-label">PGA Tour Style Â· Golf Vlog Overlay</div>

<!-- MAIN SCORECARD -->
<div id="mainCard" class="scorecard">
  <div class="hole-number">
    <div class="hole-label">HOLE</div>
    <div class="hole-num" id="holeNum">7</div>
  </div>
  <div class="divider"></div>
  <div class="hole-info">
    <div class="info-top">
      <div class="par-block">
        <div class="par-label">PAR</div>
        <div class="par-value" id="parVal">4</div>
      </div>
      <div class="info-sep"></div>
      <div class="yardage-block">
        <div class="yardage-label" id="distLabel">HOLE</div>
        <div class="yardage-value" id="yardsVal">385<span class="yardage-unit">YDS</span></div>
      </div>
      <div class="status-area">
        <div class="status-tag">
          <div class="status-dot tee" id="statusDot"></div>
          <div class="status-text tee" id="statusText">TEE SHOT</div>
        </div>
      </div>
    </div>
    <div class="shot-tracker" id="shotTracker"></div>
  </div>
</div>

<!-- CONTROLS -->
<div class="controls">
  <div class="ctrl-group">
    <div class="ctrl-label">æ´å· Hole</div>
    <div class="ctrl-row">
      <button onclick="changeHole(-1)">ï¼</button>
      <input class="input-ctrl" id="holeInput" type="number" value="7" min="1" max="18" oninput="setHole(this.value)">
      <button onclick="changeHole(1)">ï¼‹</button>
    </div>
  </div>
  <div class="ctrl-group">
    <div class="ctrl-label">æ ‡å‡†æ† Par</div>
    <div class="ctrl-row">
      <button onclick="setPar(3,this)">Par 3</button>
      <button onclick="setPar(4,this)" class="active">Par 4</button>
      <button onclick="setPar(5,this)">Par 5</button>
    </div>
  </div>
  <div class="ctrl-group">
    <div class="ctrl-label">æ†æ•° Shot</div>
    <div class="ctrl-row">
      <button onclick="changeShot(-1)">ï¼</button>
      <input class="input-ctrl" id="shotInput" type="number" value="1" min="1" max="12" oninput="setShot(this.value)">
      <button onclick="changeShot(1)">ï¼‹</button>
    </div>
  </div>

  <div class="ctrl-group with-check"> onchange="toggleDist(this.checked)">
      <span class="custom-check">
        <svg viewBox="0 0 10 8" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1,4 4,7 9,1"/></svg>
      </span>
      <span class="ctrl-label" style="margin:0;">è·æ——æ† To Pin</span>
    </label>
    <div class="ctrl-body" id="bodyDist">
      <div class="ctrl-row">
        <button onclick="changeYards(-10)">ï¼</button>
        <input class="input-ctrl" id="yardsInput" type="number" value="385" min="0" max="700" style="width:78px" oninput="setYards(this.value)">
        <button onclick="changeYards(10)">ï¼‹</button>
      </div>
    </div>
  </div>

  <div class="ctrl-group with-check">
    <label class="check-row">
      <input type="checkbox" id="chkStatus" onchange="toggleStatus(this.checked)">
      <span class="custom-check">
        <svg viewBox="0 0 10 8" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1,4 4,7 9,1"/></svg>
      </span>
      <span class="ctrl-label" style="margin:0;">å‡»çƒçŠ¶æ€ Status</span>
    </label>
    <div class="ctrl-body" id="bodyStatus">
      <div class="status-btns" id="statusBtns">
        <button class="status-btn sel-tee"  onclick="setStatus('tee','TEE SHOT',this)">ğŸŒ å¼€çƒ</button>
        <button class="status-btn"          onclick="setStatus('approach','APPROACH',this)">ğŸ¯ ä¸Šæœå²­</button>
        <button class="status-btn"          onclick="setStatus('chip','CHIP',this)">â›³ åˆ‡çƒ</button>
        <button class="status-btn"          onclick="setStatus('putt','PUTTING',this)">ğŸŸ£ æ¨æ†</button>
        <button class="status-btn"          onclick="setStatus('birdie','BIRDIE',this)">ğŸ¦ å°é¸Ÿçƒ</button>
        <button class="status-btn"          onclick="setStatus('eagle','EAGLE',this)">ğŸ¦… è€é¹°çƒ</button>
        <button class="status-btn"          onclick="setStatus('ace','HOLE IN ONE',this)">â­ ä¸€æ†è¿›æ´</button>
        <button class="status-btn"          onclick="setStatus('par','PAR',this)">ğŸ”µ å¸•</button>
        <button class="status-btn"          onclick="setStatus('bogey','BOGEY',this)">â¬œ æŸå¿Œ</button>
      </div>
    </div>
  </div>
</div>

<!-- SNAPSHOT -->
<div class="snap-wrap">
  <div class="snap-format">
    <label>èƒŒæ™¯</label>
    <button class="active" onclick="setFormat('transparent',this)">é€æ˜ PNG</button>
    <button onclick="setFormat('black',this)">é»‘åº• PNG</button>
  </div>
  <button class="snap-btn" id="snapBtn" onclick="takeSnapshot()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
      <circle cx="12" cy="13" r="4"/>
    </svg>
    å¯¼å‡ºå­—å¹•å›¾ç‰‡
  </button>
  <div class="snap-feedback" id="snapFeedback"></div>
</div>

<div class="section-title">â€” Preview Examples â€”</div>
<div class="variants" id="variants"></div>

<script>
// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const parDefaults = { 3: 165, 4: 385, 5: 520 };

let state = {
  hole: 7, par: 4,
  holeYards: 385, toPin: 385,
  currentShot: 1,
  status: 'tee', statusLabel: 'TEE SHOT',
  showDist: false,
  showStatus: false
};

let snapFormat = 'transparent';

// Status colour map (for canvas drawing)
const STATUS_COLORS = {
  tee: '#ffffff', approach: '#60a5fa', chip: '#f59e0b',
  putt: '#a78bfa', birdie: '#f87171', eagle: '#fbbf24',
  ace: '#fbbf24', par: '#60a5fa', bogey: '#9ca3af'
};

// â”€â”€â”€ HTML RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleDist(on) {
  state.showDist = on;
  document.getElementById('bodyDist').classList.toggle('visible', on);
  update();
}
function toggleStatus(on) {
  state.showStatus = on;
  document.getElementById('bodyStatus').classList.toggle('visible', on);
  update();
}

function renderShots() {
  const tracker = document.getElementById('shotTracker');
  const max = Math.max(state.par, state.currentShot);
  let html = '<div class="shot-label">SHOT</div>';
  for (let i = 1; i <= max; i++) {
    const cls = i < state.currentShot ? 'past' : i === state.currentShot ? 'current' : 'empty';
    html += `<div class="shot-dot ${cls}">${i}</div>`;
  }
  tracker.innerHTML = html;
}

function update() {
  document.getElementById('holeNum').textContent = state.hole;
  document.getElementById('parVal').textContent = state.par;
  document.getElementById('holeInput').value = state.hole;
  document.getElementById('shotInput').value = state.currentShot;
  document.getElementById('yardsInput').value = state.toPin;

  // Distance block â€” show only when checked
  const distLabel = state.currentShot === 1 ? 'HOLE' : 'TO PIN';
  document.getElementById('distLabel').textContent = distLabel;
  document.getElementById('yardsVal').innerHTML = `${state.toPin}<span class="yardage-unit">YDS</span>`;
  document.querySelector('.info-sep').style.display   = state.showDist ? '' : 'none';
  document.querySelector('.yardage-block').style.display = state.showDist ? '' : 'none';

  // Status area â€” show only when checked
  document.querySelector('.status-area').style.display = state.showStatus ? '' : 'none';
  document.getElementById('statusDot').className = `status-dot ${state.status}`;
  document.getElementById('statusText').className = `status-text ${state.status}`;
  document.getElementById('statusText').textContent = state.statusLabel;

  renderShots();
  renderVariants();
}

function changeHole(d)  { state.hole = Math.max(1, Math.min(18, state.hole + d)); update(); }
function setHole(v)     { state.hole = Math.max(1, Math.min(18, parseInt(v)||1)); update(); }
function changeYards(d) { state.toPin = Math.max(0, Math.min(700, state.toPin + d)); update(); }
function setYards(v)    { state.toPin = Math.max(0, Math.min(700, parseInt(v)||0)); update(); }

function setPar(p, btn) {
  state.par = p;
  state.holeYards = parDefaults[p];
  state.toPin = state.holeYards;
  document.querySelectorAll('.ctrl-group button').forEach(b => {
    if (['Par 3','Par 4','Par 5'].includes(b.textContent)) b.classList.remove('active');
  });
  btn.classList.add('active');
  update();
}

function changeShot(d) {
  state.currentShot = Math.max(1, Math.min(12, state.currentShot + d));
  if (state.currentShot === 1) {
    state.toPin = state.holeYards;
    setStatus('tee', 'TEE SHOT', document.querySelector('.status-btn'));
  }
  update();
}
function setShot(v) { state.currentShot = Math.max(1, Math.min(12, parseInt(v)||1)); update(); }

function setStatus(cls, label, btn) {
  state.status = cls;
  state.statusLabel = label;
  document.querySelectorAll('.status-btn').forEach(b => b.className = 'status-btn');
  if (btn) btn.className = `status-btn sel-${cls}`;
  update();
}

function setFormat(fmt, btn) {
  snapFormat = fmt;
  document.querySelectorAll('.snap-format button').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

// â”€â”€â”€ PREVIEW VARIANTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const variantExamples = [
  { hole:3,  par:3, toPin:165, shot:1, status:'tee',      label:'TEE SHOT', caption:'Par 3 Â· å¼€çƒ' },
  { hole:7,  par:4, toPin:138, shot:2, status:'approach', label:'APPROACH', caption:'Par 4 Â· ä¸Šæœå²­' },
  { hole:12, par:5, toPin:22,  shot:4, status:'putt',     label:'PUTTING',  caption:'Par 5 Â· æ¨æ†' },
  { hole:18, par:4, toPin:0,   shot:3, status:'birdie',   label:'BIRDIE',   caption:'Par 4 Â· å°é¸Ÿçƒ' },
];

function renderVariants() {
  document.getElementById('variants').innerHTML = variantExamples.map(ex => {
    const max = Math.max(ex.par, ex.shot);
    let dots = '';
    for (let i = 1; i <= max; i++) {
      const cls = i < ex.shot ? 'past' : i === ex.shot ? 'current' : 'empty';
      dots += `<div class="shot-dot ${cls}" style="width:22px;height:13px;font-size:9.5px;">${i}</div>`;
    }
    const distLbl = ex.shot === 1 ? 'HOLE' : 'TO PIN';
    return `
    <div>
      <div class="variant-label">${ex.caption}</div>
      <div class="scorecard" style="height:68px;animation:none;">
        <div class="hole-number" style="width:62px;">
          <div class="hole-label" style="font-size:7.5px;">HOLE</div>
          <div class="hole-num" style="font-size:32px;">${ex.hole}</div>
        </div>
        <div class="divider"></div>
        <div class="hole-info" style="min-width:250px;">
          <div class="info-top" style="padding:8px 12px 6px;">
            <div class="par-block">
              <div class="par-label" style="font-size:7px;">PAR</div>
              <div class="par-value" style="font-size:24px;">${ex.par}</div>
            </div>
            <div class="info-sep" style="height:26px;margin:0 10px;"></div>
            <div class="yardage-block">
              <div class="yardage-label" style="font-size:7px;">${distLbl}</div>
              <div class="yardage-value" style="font-size:20px;">${ex.toPin}<span class="yardage-unit" style="font-size:8px;">YDS</span></div>
            </div>
            <div class="status-area" style="padding-left:10px;">
              <div class="status-tag">
                <div class="status-dot ${ex.status}" style="width:4px;height:4px;animation:none;"></div>
                <div class="status-text ${ex.status}" style="font-size:11px;letter-spacing:1px;">${ex.label}</div>
              </div>
            </div>
          </div>
          <div class="shot-tracker" style="height:22px;gap:4px;padding:0 10px;">
            <div class="shot-label" style="font-size:7px;">SHOT</div>
            ${dots}
          </div>
        </div>
      </div>
    </div>`;
  }).join('');
}

// â”€â”€â”€ CANVAS SNAPSHOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Draws the scorecard faithfully using the Canvas 2D API.
// Scale factor = 3 â†’ crisp on retina / 1080p timelines.

function takeSnapshot() {
  // Target: ~400Ã—88px logical = 800Ã—176px @2x
  // On a 1920Ã—1080 timeline this sits cleanly in the corner (~21% width)
  const SCALE  = 2;
  const W      = 400;   // logical width  â†’ 800px exported
  const H      = 88;    // logical height â†’ 176px exported
  const LEFT_W = 66;    // green hole-number block
  const DIV_W  = 3;     // gold divider
  const RIGHT_X = LEFT_W + DIV_W;
  const RIGHT_W = W - RIGHT_X;
  const TOP_H  = 60;    // upper info zone
  const BOT_H  = 28;    // shot-tracker zone

  const canvas = document.createElement('canvas');
  canvas.width  = W * SCALE;
  canvas.height = H * SCALE;
  const ctx = canvas.getContext('2d');
  ctx.scale(SCALE, SCALE);

  // â”€â”€ Background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (snapFormat === 'black') {
    ctx.fillStyle = '#000000';
    ctx.fillRect(0, 0, W, H);
  }
  // else transparent (already cleared)

  // â”€â”€ Left green block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ctx.fillStyle = '#00573F';
  ctx.fillRect(0, 0, LEFT_W, H);

  // "HOLE" micro-label
  ctx.fillStyle = 'rgba(255,255,255,0.55)';
  ctx.font = '600 6.5px "Barlow Condensed", sans-serif';
  ctx.letterSpacing = '2px';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('HOLE', LEFT_W / 2, 20);

  // Hole number
  ctx.fillStyle = '#ffffff';
  ctx.font = '900 34px "Barlow Condensed", sans-serif';
  ctx.letterSpacing = '-1px';
  ctx.fillText(String(state.hole), LEFT_W / 2, 46);

  // â”€â”€ Gold divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ctx.fillStyle = '#C9A84C';
  ctx.fillRect(LEFT_W, 0, DIV_W, H);

  // â”€â”€ Right dark block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ctx.fillStyle = 'rgba(8,12,18,0.97)';
  ctx.fillRect(RIGHT_X, 0, RIGHT_W, H);

  // Thin separator between top/bottom
  ctx.fillStyle = 'rgba(255,255,255,0.06)';
  ctx.fillRect(RIGHT_X, TOP_H, RIGHT_W, 1);

  // Bottom shot bar bg
  ctx.fillStyle = 'rgba(0,0,0,0.35)';
  ctx.fillRect(RIGHT_X, TOP_H + 1, RIGHT_W, BOT_H - 1);

  // â”€â”€ PAR label + value â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const parX = RIGHT_X + 14;
  ctx.letterSpacing = '2px';
  ctx.fillStyle = '#C9A84C';
  ctx.font = '700 6.5px "Barlow Condensed", sans-serif';
  ctx.textAlign = 'left';
  ctx.textBaseline = 'middle';
  ctx.fillText('PAR', parX, 14);

  ctx.letterSpacing = '-1px';
  ctx.fillStyle = '#ffffff';
  ctx.font = '900 26px "Barlow Condensed", sans-serif';
  ctx.fillText(String(state.par), parX, 39);

  // Vertical separator
  ctx.fillStyle = 'rgba(255,255,255,0.1)';
  ctx.fillRect(parX + 32, 10, 1, 30);

  // â”€â”€ YARDS / TO PIN (optional) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let statusStartX_ref = RIGHT_X + RIGHT_W; // fallback if neither shown

  if (state.showDist) {
    const yardX = parX + 32 + 12;
    const distLabel = state.currentShot === 1 ? 'HOLE' : 'TO PIN';
    ctx.letterSpacing = '2px';
    ctx.fillStyle = 'rgba(255,255,255,0.4)';
    ctx.font = '600 6.5px "Barlow Condensed", sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(distLabel, yardX, 14);

    ctx.letterSpacing = '-0.5px';
    ctx.fillStyle = 'rgba(255,255,255,0.88)';
    ctx.font = '800 20px "Barlow Condensed", sans-serif';
    ctx.fillText(String(state.toPin), yardX, 39);

    const yardNumW = ctx.measureText(String(state.toPin)).width;
    ctx.letterSpacing = '0px';
    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '500 8px "Barlow Condensed", sans-serif';
    ctx.fillText('YDS', yardX + yardNumW + 3, 39);
  }

  // â”€â”€ Status dot + text (optional) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (state.showStatus) {
    const statusColor = STATUS_COLORS[state.status] || '#ffffff';
    ctx.font = '700 11px "Barlow Condensed", sans-serif';
    ctx.letterSpacing = '1.5px';
    const statusW = ctx.measureText(state.statusLabel).width;
    const dotR = 2.5;
    const totalStatusW = dotR * 2 + 6 + statusW;
    const statusStartX = RIGHT_X + RIGHT_W - 12 - totalStatusW;

    ctx.beginPath();
    ctx.arc(statusStartX + dotR, TOP_H / 2, dotR, 0, Math.PI * 2);
    ctx.fillStyle = statusColor;
    ctx.fill();

    ctx.fillStyle = statusColor;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText(state.statusLabel, statusStartX + dotR * 2 + 6, TOP_H / 2);
  }

  // â”€â”€ Shot tracker dots â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const max = Math.max(state.par, state.currentShot);
  const dotW = 22, dotH = 13, dotGap = 4;
  const shotLabelW = 32;
  let sx = RIGHT_X + 11 + shotLabelW;
  const sy = TOP_H + 1 + (BOT_H - dotH) / 2;

  ctx.letterSpacing = '2px';
  ctx.fillStyle = 'rgba(255,255,255,0.28)';
  ctx.font = '600 6.5px "Barlow Condensed", sans-serif';
  ctx.textAlign = 'left';
  ctx.textBaseline = 'middle';
  ctx.fillText('SHOT', RIGHT_X + 11, TOP_H + BOT_H / 2);

  for (let i = 1; i <= max; i++) {
    const isCurrent = i === state.currentShot;
    const isPast    = i < state.currentShot;

    const r = 2;
    ctx.beginPath();
    ctx.moveTo(sx + r, sy);
    ctx.lineTo(sx + dotW - r, sy);
    ctx.quadraticCurveTo(sx + dotW, sy, sx + dotW, sy + r);
    ctx.lineTo(sx + dotW, sy + dotH - r);
    ctx.quadraticCurveTo(sx + dotW, sy + dotH, sx + dotW - r, sy + dotH);
    ctx.lineTo(sx + r, sy + dotH);
    ctx.quadraticCurveTo(sx, sy + dotH, sx, sy + dotH - r);
    ctx.lineTo(sx, sy + r);
    ctx.quadraticCurveTo(sx, sy, sx + r, sy);
    ctx.closePath();

    if (isCurrent) {
      ctx.fillStyle = '#C9A84C';
    } else if (isPast) {
      ctx.fillStyle = 'rgba(255,255,255,0.12)';
    } else {
      ctx.fillStyle = 'rgba(255,255,255,0.05)';
      ctx.strokeStyle = 'rgba(255,255,255,0.09)';
      ctx.lineWidth = 1;
      ctx.stroke();
    }
    ctx.fill();

    ctx.letterSpacing = '0px';
    ctx.font = '800 8.5px "Barlow Condensed", sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillStyle = isCurrent ? '#000' : isPast ? 'rgba(255,255,255,0.45)' : 'rgba(255,255,255,0.12)';
    ctx.fillText(String(i), sx + dotW / 2, sy + dotH / 2 + 0.5);

    sx += dotW + dotGap;
  }

  // â”€â”€ Download â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const statusSlug = state.showStatus ? '_' + state.statusLabel.replace(/[^a-zA-Z0-9]/g, '').toUpperCase() : '';
  const yardsSlug  = state.showDist   ? `_${state.toPin}yds` : '';
  const holeStr  = String(state.hole).padStart(2, '0');
  const filename = `Hole${holeStr}_Par${state.par}_Shot${state.currentShot}${statusSlug}${yardsSlug}_800x176.png`;

  const link = document.createElement('a');
  link.download = filename;
  link.href = canvas.toDataURL('image/png');
  link.click();

  // Feedback
  const fb = document.getElementById('snapFeedback');
  fb.textContent = `âœ“  ${filename}`;
  fb.classList.add('show');
  const snapBtn = document.getElementById('snapBtn');
  snapBtn.disabled = true;
  setTimeout(() => {
    fb.classList.remove('show');
    snapBtn.disabled = false;
  }, 3500);
}

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderVariants();
update();
</script>
</body>
</html>
